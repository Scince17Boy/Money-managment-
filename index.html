<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Manoj Media Downloader</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  background:radial-gradient(circle at top,#0f172a,#020617 70%);
  font-family:'Segoe UI',Arial,sans-serif;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ===== CONTAINER ===== */
.app{
  width:100%;
  max-width:720px;
  background:rgba(255,255,255,0.05);
  backdrop-filter:blur(18px);
  border-radius:22px;
  padding:28px;
  box-shadow:0 30px 80px rgba(0,0,0,.7);
}

/* ===== HEADER ===== */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}
.brand{
  font-size:22px;
  font-weight:700;
  letter-spacing:.3px;
}
.status{
  text-align:right;
  font-size:13px;
  color:#cbd5f5;
}

/* ===== INPUT ===== */
input{
  width:100%;
  padding:15px;
  border-radius:14px;
  border:none;
  outline:none;
  font-size:15px;
  margin-bottom:18px;
}

/* ===== BUTTONS ===== */
.buttons{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:center;
}
button{
  padding:12px 18px;
  border:none;
  border-radius:14px;
  cursor:pointer;
  color:white;
  font-size:14px;
  font-weight:600;
  min-width:130px;
  transition:.2s;
}
button:hover{transform:translateY(-2px)}
.yt{background:#ef4444}
.mp3{background:#22c55e}
.ig{background:#e11d48}
.fb{background:#2563eb}

/* ===== RESULT ===== */
#result{
  margin-top:18px;
}
.card{
  background:#020617;
  padding:16px;
  border-radius:16px;
  text-align:center;
  animation:fade .4s ease;
}
a{color:#38bdf8;font-weight:bold;text-decoration:none}

@keyframes fade{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:none}
}
</style>
</head>
<body>

<div class="app">

  <!-- HEADER -->
  <div class="header">
    <div class="brand">üì• Manoj Media Downloader</div>
    <div class="status">
      <div id="time">--:--:--</div>
      <div id="battery">üîã --%</div>
    </div>
  </div>

  <!-- INPUT -->
  <input id="input" placeholder="Paste YouTube / Instagram / Facebook link">

  <!-- BUTTONS -->
  <div class="buttons">
    <button class="yt" onclick="ytVideo()">YouTube Video</button>
    <button class="mp3" onclick="ytAudio()">YouTube MP3</button>
    <button class="ig" onclick="instagram()">Instagram</button>
    <button class="fb" onclick="facebook()">Facebook</button>
  </div>

  <!-- RESULT -->
  <div id="result"></div>

</div>

<script>
/* ===== TIME & DATE ===== */
function updateTime(){
  const d = new Date();
  const t = d.toLocaleTimeString();
  const date = d.toLocaleDateString();
  document.getElementById("time").innerText = t + " | " + date;
}
setInterval(updateTime,1000);
updateTime();

/* ===== BATTERY ===== */
if(navigator.getBattery){
  navigator.getBattery().then(b=>{
    function update(){
      document.getElementById("battery").innerText =
        "üîã " + Math.round(b.level*100) + "%";
    }
    update();
    b.addEventListener("levelchange",update);
  });
}else{
  document.getElementById("battery").innerText = "üîã N/A";
}

/* ===== API ===== */
const BASE="https://okatsu-rolezapiiz.vercel.app";
const result=document.getElementById("result");

function loading(){
  result.innerHTML="<div class='card'>‚è≥ Processing...</div>";
}

async function ytVideo(){
  loading();
  const r=await fetch(`${BASE}/downloader/ytmp4?url=`+encodeURIComponent(input.value));
  const j=await r.json();
  if(j.result?.mp4){
    result.innerHTML=`<div class="card">
      <b>${j.result.title}</b><br><br>
      <a href="${j.result.mp4}" target="_blank">‚¨á Download MP4</a>
    </div>`;
  }else result.innerHTML="<div class='card'>‚ùå Failed</div>";
}

async function ytAudio(){
  loading();
  const r=await fetch(`${BASE}/downloader/ytmp3?url=`+encodeURIComponent(input.value));
  const j=await r.json();
  if(j.dl){
    result.innerHTML=`<div class="card">
      <b>${j.title}</b><br><br>
      <a href="${j.dl}" target="_blank">üéµ Download MP3</a>
    </div>`;
  }else result.innerHTML="<div class='card'>‚ùå Failed</div>";
}

async function instagram(){
  loading();
  const r=await fetch(`${BASE}/downloader/ig?url=`+encodeURIComponent(input.value));
  const j=await r.json();
  result.innerHTML="";
  j.result.forEach(m=>{
    result.innerHTML+=`<div class="card">
      <a href="${m.url}" target="_blank">‚¨á Download Media</a>
    </div>`;
  });
}

async function facebook(){
  loading();
  const r=await fetch(`${BASE}/downloader/facebook?url=`+encodeURIComponent(input.value));
  const j=await r.json();
  if(j.result?.media){
    const v=j.result.media.video_hd||j.result.media.video_sd;
    result.innerHTML=`<div class="card">
      <a href="${v}" target="_blank">‚¨á Download Facebook Video</a>
    </div>`;
  }else result.innerHTML="<div class='card'>‚ùå Failed</div>";
}
</script>

</body>
</html>
